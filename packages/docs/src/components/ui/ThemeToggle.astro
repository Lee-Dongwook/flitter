---
import SunIcon from "./SunIcon.astro";
import MoonIcon from "./MoonIcon.astro";
---

<div class="flex items-center justify-center">
  <button
    id="theme-toggle-button"
    class="rounded-md bg-gray-800 p-2 text-white transition-colors duration-300 dark:bg-gray-300 dark:text-black"
    onclick="toggleTheme()"
  >
    <span id="theme-icon" class="flex h-6 w-6 items-center justify-center">
      <span class="hidden dark:inline-block">
        <SunIcon />
      </span>
      <span class="inline-block dark:hidden">
        <MoonIcon />
      </span>
    </span>
  </button>
</div>

<script>
  const getElement = <T extends HTMLElement>(id: string): T | null =>
    document.getElementById(id) as T | null;

  const toggleTheme = () => {
    const html = document.documentElement;
    const isDark = html.classList.toggle("dark");

    document.cookie = `theme=${isDark ? "light" : "dark"}; path=/`;
  };

  const themeToggleButton = getElement<HTMLButtonElement>(
    "theme-toggle-button",
  );
  if (themeToggleButton) {
    themeToggleButton.addEventListener("click", toggleTheme);
  }
</script>